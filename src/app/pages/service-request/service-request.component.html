<div class="auth-container" data-theme="liquidGlace">
  <div class="liquid-gradient fixed inset-0 -z-10"></div>
  <div class="fixed inset-0 -z-10 bg-gradient-to-br from-slate-900/90 via-purple-900/80 to-slate-900/90"></div>

  <div class="min-h-screen flex items-center justify-center px-4 py-12">
    <app-glass-card variant="strong" class="w-full max-w-2xl fade-in">
      <div class="p-8">
        <h1 class="text-3xl font-bold text-white mb-2 text-center">Demande d'utilisation</h1>
        <p class="text-gray-300 text-center mb-8">
          Vous souhaitez utiliser Tamali pour gérer votre entreprise ?<br>
          Envoyez-nous votre demande et nous vous contacterons rapidement.
        </p>

        <form [formGroup]="serviceRequestForm" (ngSubmit)="onSubmit()" class="space-y-6">
          <div>
            <label for="email" class="block text-sm font-medium text-gray-300 mb-2">
              Votre adresse email <span class="text-red-400">*</span>
            </label>
            <input
              id="email"
              type="email"
              formControlName="email"
              class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent"
              placeholder="votre@email.com"
              [class.border-red-500]="serviceRequestForm.get('email')?.invalid && serviceRequestForm.get('email')?.touched"
            />
            @if (serviceRequestForm.get('email')?.invalid && serviceRequestForm.get('email')?.touched) {
              <p class="mt-1 text-sm text-red-400">
                @if (serviceRequestForm.get('email')?.errors?.['required']) {
                  L'email est requis
                } @else if (serviceRequestForm.get('email')?.errors?.['email']) {
                  Email invalide
                }
              </p>
            }
          </div>

          <div>
            <label for="objective" class="block text-sm font-medium text-gray-300 mb-2">
              Votre objectif <span class="text-red-400">*</span>
            </label>
            <textarea
              id="objective"
              formControlName="objective"
              rows="6"
              class="w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none"
              placeholder="Décrivez votre entreprise et pourquoi vous souhaitez utiliser Tamali (minimum 10 caractères)..."
              [class.border-red-500]="serviceRequestForm.get('objective')?.invalid && serviceRequestForm.get('objective')?.touched"
            ></textarea>
            <p class="mt-2 text-sm text-gray-400">
              {{ serviceRequestForm.get('objective')?.value?.length || 0 }} / 1000 caractères
            </p>
            @if (serviceRequestForm.get('objective')?.invalid && serviceRequestForm.get('objective')?.touched) {
              <p class="mt-1 text-sm text-red-400">
                @if (serviceRequestForm.get('objective')?.errors?.['required']) {
                  L'objectif est requis
                } @else if (serviceRequestForm.get('objective')?.errors?.['minlength']) {
                  Minimum 10 caractères requis
                } @else if (serviceRequestForm.get('objective')?.errors?.['maxlength']) {
                  Maximum 1000 caractères
                }
              </p>
            }
          </div>

          <button
            type="submit"
            [disabled]="serviceRequestForm.invalid || loading"
            class="w-full btn btn-primary glow-effect-hover py-3 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed"
          >
            @if (loading) {
              <span>Envoi en cours...</span>
            } @else {
              <span>Envoyer la demande</span>
            }
          </button>
        </form>

        <div class="mt-8 text-center">
          <p class="text-gray-400 text-sm">
            Vous avez déjà un compte ?
            <a routerLink="/auth/login" class="text-purple-400 hover:text-purple-300 font-medium">
              Se connecter
            </a>
          </p>
        </div>
      </div>
    </app-glass-card>
  </div>
</div>
